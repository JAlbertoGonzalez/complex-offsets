{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx","utils.ts"],"names":["App","useState","privateKey","setPrivateKey","totalRenters","setTotalRenters","overlap","setOverlap","data","_","times","n","renterIndex","renterPk","hdkey","fromExtendedKey","deriveChild","nodeId","getNodeId","offset","getQueueOffset","exchangeByteStart","Buffer","from","exchangeByteEnd","start","toString","end","id","fluid","Label","Control","value","onChange","e","target","onClick","fromMasterSeed","crypto","randomBytes","privateExtendedKey","type","parseInt","map","row","width","marks","min","max","valueLabelDisplay","aria-labelledby","step","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","key","res","bitcore","PrivateKey","fromString","sha256","createHash","update","toBuffer","digest","Number","isFinite","t","y","p","span","assert","isSafeInteger","Math","pow","ceil"],"mappings":"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","file":"static/js/main.281e782d.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\nimport { Button, Col, Container, Form, FormGroup, Row } from 'react-bootstrap';\nimport { Slider, Table, TableCell, TableRow } from '@material-ui/core';\nimport hdkey from 'hdkey'\nimport crypto from 'crypto'\nimport _ from 'lodash'\nimport { DataGrid, GridColDef, GridRowData } from '@material-ui/data-grid';\nimport { getNodeId, getQueueOffset } from './utils';\nimport HDNode from 'hdkey';\n\nfunction App() {\n  const [privateKey, setPrivateKey] = useState<string>('xprv9vwDE57wpUcMyycuTsZZMY3Lm6hRrFg6tsYgmELTorcg7yTuafpGE9NqhESdR3PqcHGj7tG2QJjoukgsG6Sy3njq25LxjnRjNkJd3RBz5zu');\n  const [totalRenters, setTotalRenters] = useState(10);\n  const [overlap, setOverlap] = useState(1);\n\n  const data: GridRowData[] = _.times(totalRenters, (n) => {\n    const renterIndex = n + 1;\n    const renterMasterPk: any = hdkey.fromExtendedKey(privateKey)\n    const renterPk: HDNode = renterMasterPk.deriveChild(renterIndex);\n\n    const nodeId = getNodeId(renterPk);\n    const offset = getQueueOffset(totalRenters, overlap);\n    const exchangeByteStart = Buffer.from(nodeId, 'hex')[0] - offset;\n    const exchangeByteEnd = exchangeByteStart + (offset * 2);\n\n    const start = Buffer.from([exchangeByteStart]).toString('hex')\n    const end = Buffer.from([exchangeByteEnd]).toString('hex')\n\n    return {\n      id: n + 1,\n      nodeId: getNodeId(renterPk),\n      offset: offset,\n      exchangeByteStart: start,\n      exchangeByteEnd: end\n    }\n  });\n\n  return (\n    <Container fluid>\n      <Form>\n        <FormGroup>\n          <Form.Label>Complex Private Key</Form.Label>\n          <Form.Control value={privateKey} onChange={(e) => setPrivateKey(e.target.value)}>\n\n          </Form.Control>\n          <Button onClick={() => setPrivateKey(hdkey.fromMasterSeed(crypto.randomBytes(16)).privateExtendedKey)}>Generate a new key</Button>\n        </FormGroup>\n        <Row>\n          <Col>\n\n            <FormGroup>\n              <Form.Label>Total Renters</Form.Label>\n              <Form.Control value={totalRenters} type=\"number\" onChange={(e) => setTotalRenters(parseInt(e.target.value, 10))}>\n\n              </Form.Control>\n            </FormGroup>\n          </Col>\n\n          <Col>\n            <FormGroup>\n              <Form.Label>Overlap</Form.Label>\n              <Form.Control value={overlap} type=\"number\" onChange={(e) => setOverlap(parseInt(e.target.value, 10))}>\n              </Form.Control>\n            </FormGroup>\n          </Col>\n        </Row>\n\n        <Table>\n          {data.map((row) => {\n            return <TableRow>\n\n              <TableCell width={10}>{row.id}</TableCell>\n              <TableCell width={10}>{row.nodeId}</TableCell>\n              <TableCell width={10}>{row.exchangeByteStart}</TableCell>\n              <TableCell width={10}>{row.exchangeByteEnd}</TableCell>\n              <TableCell>\n                <Slider\n                  marks\n                  min={0}\n                  max={256}\n                  valueLabelDisplay=\"auto\"\n                  aria-labelledby=\"range-slider\"\n                  value={[parseInt(Buffer.from(row.exchangeByteStart).toString(), 16), parseInt(Buffer.from(row.exchangeByteEnd).toString(), 16)]}\n                  step={1} />\n              </TableCell>\n\n            </TableRow>\n\n\n          })}\n        </Table>\n\n      </Form>\n    </Container>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import HDNode from 'hdkey';\nimport crypto from 'crypto';\nimport assert from 'assert';\nimport bitcore from 'bitcore-lib';\n\nexport function getNodeId(key: HDNode) {\n\n  const privKey: any = bitcore.PrivateKey;\n  const res = privKey.fromString(key.privateKey.toString('hex'));\n\n  const sha256 = crypto.createHash('sha256').update(res.toBuffer()).digest();\n  return crypto.createHash('ripemd160').update(sha256).digest('hex').toString();\n}\n\nconst _getQueueSpan = function (t: number, y: number, p: number) {\n  assert(Number.isSafeInteger(t) && t > 0, 't is expected to be integer greater than zero');\n  assert(Number.isSafeInteger(y) && y > 0, 'y is expected to be integer greater than zero');\n  assert(Number.isFinite(p) && p > 0 && p < 1, 'p is expected to be number > 0 and < 1');\n\n  var x = (Math.pow((p - 1) / -1, 1 / y) - 1) * -t;\n  return x;\n};\n\nexport function getQueueOffset(totalRenters: number, overlap: number) {\n  if (!Number.isFinite(overlap)) {\n    overlap = 1;\n  }\n\n  const span = _getQueueSpan(\n    256, // total number of queues\n    totalRenters, // total number of renters in pool\n    0.999 // percentage\n  );\n\n  return Math.ceil(span * overlap / 2);\n};\n\n\n"],"sourceRoot":""}